{"version":3,"file":"commonHelpers.js","sources":["../src/img/error-icon.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__09c89fb5__\"","import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { loadMoreBtn } from '../main';\n\n//icon\nimport icon from '../img/error-icon.svg';\n\nconst authKey = '43558017-e13ccc47d2aef7f917b5afe22';\n\nconst perPage = 15;\nlet page = 1;\nlet currentSearchValue = '';\nlet totalItems = 0;\n\nexport async function fetchImages(searchValue) {\n  page = 1;\n  currentSearchValue = searchValue;\n  const listOfImages = document.querySelector('#images');\n  listOfImages.innerHTML = '';\n\n  // loader on\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n\n  // options for axios GET request\n  const searchParams = new URLSearchParams({\n    key: authKey,\n    q: searchValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page,\n  });\n  const URL = `https://pixabay.com/api/?${searchParams}`;\n\n  //axios lib\n  const response = await axios.get(URL);\n  return response.data;\n}\n\nexport async function loadMore() {\n  if (!currentSearchValue) {\n    return;\n  }\n  // options for axios GET request\n  page += 1;\n  const searchParams = new URLSearchParams({\n    key: authKey,\n    q: currentSearchValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page,\n  });\n  const URL = `https://pixabay.com/api/?${searchParams}`;\n\n  //axios get request\n  const response = await axios.get(URL);\n  let totalItems = response.data.totalHits;\n  let totalPages = Math.ceil(totalItems / perPage);\n\n  if (page > totalPages) {\n    loadMoreBtn.style.display = 'none';\n    return iziToast.show({\n      class: 'search-404',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      iconUrl: icon,\n      backgroundColor: '#EF4040',\n      transitionIn: 'bounceInDown',\n      transitionOut: 'fadeOutUp',\n      theme: 'dark',\n      closeOnClick: true,\n    });\n  }\n  return response.data;\n}\n","const listOfImages = document.querySelector('#images');\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport default function createMarkup(fetchedData) {\n  //creating markup with fetched data\n  const markup = fetchedData.hits\n    .map(image => {\n      return `<li class=\"images-image\" >\n                        <div class=\"gallery\">\n         <a href=\"${image.largeImageURL}\">\n          <img class=\"img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"${image.tags}\"/>\n         </a>\n                          </div>\n                    <ul class=\"image-details-container\">\n                        <li>\n                            <h2 class=\"image-heading\">Likes</h2>\n                            <p class=\"image-description\">${image.likes}</p>\n                        </li>\n                        <li>\n                            <h2 class=\"image-heading\">Views</h2>\n                            <p class=\"image-description\">${image.views}</p>\n                        </li>\n                        <li>\n                            <h2 class=\"image-heading\">Comments</h2>\n                            <p class=\"image-description\">${image.comments}</p>\n                        </li>\n                        <li>\n                            <h2 class=\"image-heading\">Downloads</h2>\n                            <p class=\"image-description\">${image.downloads}</p>\n                        </li>\n                    </ul>\n            </li>`;\n    })\n    .join('');\n  listOfImages.insertAdjacentHTML('beforeend', markup);\n\n  //lightbox lib\n  var lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'title',\n    captionDelay: 350,\n  });\n  lightbox.refresh();\n}\n","import { fetchImages, loadMore } from './js/pixabay-api';\nimport createMarkup from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//icon\nimport icon from './img/error-icon.svg';\n\nconst form = document.querySelector('.form');\nexport const loadMoreBtn = document.querySelector('.load-more-btn');\nlet currentKeyword = '';\n\nform.addEventListener('submit', e => {\n  //show loader\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n  console.log(loader);\n\n  //prevent default events on the form\n  e.preventDefault();\n\n  //trimming a search value\n  const inputValue = e.currentTarget.elements.search.value.trim();\n  if (!inputValue) {\n    loader.style.display = 'none';\n    return;\n  }\n  currentKeyword = inputValue;\n  //fetch (axios)\n  fetchImages(inputValue)\n    .then(data => {\n      if (data.total === 0) {\n        const images = document.querySelector('#images');\n        images.innerHTML = '';\n\n        iziToast.show({\n          class: 'search-404',\n          message:\n            'Sorry, there are no images matching your search query. Please, try again!',\n          position: 'topRight',\n          iconUrl: icon,\n          backgroundColor: '#EF4040',\n          transitionIn: 'bounceInDown',\n          transitionOut: 'fadeOutUp',\n          theme: 'dark',\n          closeOnClick: true,\n        });\n\n        //loader off\n        loader.style.display = 'none';\n        return;\n      }\n\n      //creating markup\n      createMarkup(data);\n      loader.style.display = 'none';\n      loadMoreBtn.style.display = 'block';\n    })\n    .catch(error => {\n      loader.style.display = 'none';\n      console.log(error.message);\n    });\n  form.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  //show loader\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n  await loadMore()\n    .then(data => {\n      if (!data) {\n        loader.style.display = 'none';\n        return;\n      }\n      createMarkup(data);\n      loader.style.display = 'none';\n    })\n    .catch(error => {\n      console.log(error);\n      loader.style.display = 'none';\n    });\n});\n"],"names":["icon","authKey","perPage","page","currentSearchValue","fetchImages","searchValue","listOfImages","loader","URL","axios","loadMore","response","totalItems","totalPages","loadMoreBtn","iziToast","createMarkup","fetchedData","markup","image","lightbox","SimpleLightbox","form","e","inputValue","data","images","error"],"mappings":"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"}